export type Locale = "ja" | "en";

export const defaultLocale: Locale = "ja";

type Dict = Record<string, string>;

const ja: Dict = {
  // Common
  "common.back": "← 戻る",
  "common.add": "＋ 追加",
  "common.cancel": "キャンセル",
  "common.save": "保存",
  "common.saving": "保存中...",
  "common.edit": "編集",
  "common.delete": "削除",
  "common.auto": "自動",
  "common.loading": "読み込み中...",

  // Auth
  "auth.processing": "認証処理中…",
  "auth.login_google": "Googleでログイン",
  "auth.toast_signed_in": "ログインしました",
  "auth.toast_signed_out": "ログアウトしました",
  "auth.guest": "ゲストモード",
  "auth.contact": "お問い合わせ",
  "auth.menu": "メニュー",
  "auth.logout": "ログアウト",

  // Home
  "home.subtitle": "YouTube のタブ譜動画で練習進捗を記録",
  "home.list_title": "練習曲一覧",
  "home.guest_limit": "ゲストモードでは3件まで登録できます。これ以上登録する場合はアカウント登録してください。",
  "home.register_login": "アカウント登録 / ログイン",
  "home.empty.1": "YouTube の演奏動画を登録すると、コピー練習の進捗をかんたんに記録できます。",
  "home.empty.2": "アカウントなしでも ゲストモードでそのまま利用OK（3件まで）。",
  "home.empty.3": "ログインすると、保存データがずっと残り、他の端末とも同期できます。",
  "home.empty_auth.1": "まだ動画がありません。最初の動画を登録して練習を始めましょう。",
  "category.none": "カテゴリーなし",
  "video.add": "動画を追加",
  "error.add_failed": "登録に失敗しました",
  "field.title_optional": "タイトル（任意）",
  "placeholder.sample_title": "例: Sample Guitar Tab",
  "auto_title.loading": "タイトルを自動取得中…",
  "field.instrument_optional": "楽器（任意）",
  "field.category_optional": "カテゴリー（任意）",
  "placeholder.category": "例: 練習中 / 本命 / ジャンル名",
  "field.duration_optional": "動画長（秒・任意）",
  "button.fetch": "自動取得",
  "button.fetching": "取得中...",
  "error.fetch_duration": "動画長の自動取得に失敗しました",

  // Video detail
  "error.video_not_found": "動画が見つかりませんでした。",
  "video.open": "動画を開く",
  "video.coverage": "完了率",
  "video.proficiency": "習熟度",
  "confirm.delete_video": "この動画を削除しますか？",
  "error.delete_failed": "削除に失敗しました",
  "video.timeline_title": "練習タイムライン",
  "error.no_track": "トラック情報がありません。",
  "level.high": "高",
  "level.mid": "中",
  "level.low": "低",
  "aria.toggle_top": "上段トグル",
  "aria.toggle_mid": "中段トグル",
  "aria.toggle_bottom": "下段トグル",
  "video.legend": "上=高レベル、下=低レベル。各段を個別にタップでON/OFF。上段は下段がONのときのみONにでき、下段をOFFにすると上段もOFFになります。",

  // Edit dialog
  "video.edit_title": "動画情報を編集",
  "field.title": "タイトル",
  "field.instrument": "楽器",
  "field.category": "カテゴリー",
  "field.note": "メモ",
  "field.duration": "動画長（秒）",
  "field.blocksize": "ブロック間隔（秒）",
  "hint.blocksize_change": "変更時は既存の進捗を「最大値」で変換します。",

  // Hub
  "hub.subtitle": "練習モジュールのハブ",
  "hub.progress.title": "YouTube コピー練習",
  "hub.progress.desc": "動画一覧・追加・個別練習タイムライン",
  "hub.intervals.title": "音程練習",
  "hub.intervals.desc": "リアルタイム音程検出で度数を確認",
  "hub.intervals_quiz.title": "度数クイズ",
  "hub.intervals_quiz.desc": "『Cの3度を弾いてください』などを出題・採点",

  // Progress module
  "progress.title": "YouTube コピー練習",
  "progress.new.subtitle": "YouTube URL を入力してコピー練習を開始",

  // Nav
  "nav.home": "ホーム",
  "nav.progress": "コピー練習",

  // Intervals
  "intervals.title": "ベース音程マスター",
  "intervals.subtitle": "最初に弾いた音をルートとして固定し、次に弾いた音の音程をリアルタイム表示します。",
  "intervals.start": "開始",
  "intervals.stop": "停止",
  "intervals.reset_root": "ルートをリセット",
  "intervals.status.idle": "待機中",
  "intervals.status.detecting": "検出中...",
  "intervals.status.detecting_low": "検出中（低遅延）",
  "intervals.status.detecting_stable": "検出中（安定）",
  "intervals.status.running_low": "稼働中（低遅延）",
  "intervals.status.running_stable": "稼働中（安定）",
  "intervals.status.mic_access": "マイクにアクセス中...",
  "intervals.status.mic_denied": "マイクの使用が拒否されました",
  "intervals.status.stopped": "停止中",
  "intervals.settings.detector": "検出器",
  "intervals.settings.input": "入力",
  "intervals.settings.advanced": "詳細設定",
  "intervals.detector.acf2plus": "ACF2PLUS（低音に強い）",
  "intervals.device": "デバイス",
  "intervals.root": "ルート",
  "intervals.current": "現在",
  "intervals.current_note": "現在の音",
  "intervals.degree": "度数",
  "intervals.tip.root_auto": "最初に検出された安定した音を自動でルートに設定します。",
  "intervals.example.degrees": "例: b3, 3, 4, b7, 5 など",
  "intervals.howto.title": "使い方",
  "intervals.howto.1": "「開始」を押してマイクアクセスを許可してください。",
  "intervals.howto.2": "最初に鳴らした音がルート(R)になります。以降、弾いた音との度数を表示します。",
  "intervals.howto.3": "誤検出やルートを変えたい場合は「ルートをリセット」を押してください。",
  "intervals.howto.4": "雑音が多い環境では検出が不安定になる場合があります。",
  "intervals.howto.5": "指板では、赤=ルート音、青=現在音の同ピッチ位置を全弦で表示します（重なると紫）。",
  
  // Quiz (Intervals Quiz)
  "quiz.title": "度数クイズ",
  "quiz.subtitle": "例: 『Cの3度を弾いてください』。マイク入力で判定します。",
  "quiz.start": "開始",
  "quiz.stop": "停止",
  "quiz.next": "次の問題",
  "quiz.input": "入力",
  "quiz.question_label": "問題",
  "quiz.question": "{root} の {degree} を弾いてください",
  "quiz.judge": "判定:",
  "quiz.judge_idle": "-",
  "quiz.judge_listening": "判定待ち...",
  "quiz.correct": "正解！",
  "quiz.wrong": "不正解",
  "quiz.current_note": "現在音",
  "quiz.current_note_none": "現在音: -",
  "quiz.status.idle": "待機中",
  "quiz.status.listening": "検出中...",
  "quiz.status.detected": "検出済み",
  "quiz.status.running": "採点中",
  "quiz.status.mic_access": "マイクにアクセス中...",
  "quiz.status.mic_denied": "マイクの使用が拒否されました",
  "quiz.status.stopped": "停止中",
  "quiz.howto.title": "使い方",
  "quiz.howto.1": "『開始』を押してマイク利用を許可します。",
  "quiz.howto.2": "問題に合わせて任意のオクターブで該当度数を弾きます（オクターブは自由）。",
  "quiz.howto.3": "合っていれば『正解』、違えば『不正解』と表示されます。",
  "quiz.howto.4": "『次の問題』でランダムに出題を切り替えられます。",
};

const en: Dict = {
  // Common
  "common.back": "← Back",
  "common.add": "+ Add",
  "common.cancel": "Cancel",
  "common.save": "Save",
  "common.saving": "Saving...",
  "common.edit": "Edit",
  "common.delete": "Delete",
  "common.auto": "Auto",
  "common.loading": "Loading...",

  // Auth
  "auth.processing": "Processing sign-in…",
  "auth.login_google": "Sign in with Google",
  "auth.toast_signed_in": "Signed in",
  "auth.toast_signed_out": "Signed out",
  "auth.guest": "Guest Mode",
  "auth.contact": "Contact",
  "auth.menu": "Menu",
  "auth.logout": "Log out",

  // Home
  "home.subtitle": "Track practice with YouTube tab videos",
  "home.list_title": "Practice List",
  "home.guest_limit": "Guest mode allows up to 3 items. Sign up to add more.",
  "home.register_login": "Sign up / Log in",
  "home.empty.1": "Register YouTube performance videos to easily track your copy practice progress.",
  "home.empty.2": "No account needed — use Guest Mode as is (up to 3 items).",
  "home.empty.3": "Sign in to keep your data and sync across devices.",
  "home.empty_auth.1": "No videos yet. Add your first one to start practicing.",
  "category.none": "No Category",
  "video.add": "Add Video",
  "error.add_failed": "Failed to add",
  "field.title_optional": "Title (optional)",
  "placeholder.sample_title": "e.g. Sample Guitar Tab",
  "auto_title.loading": "Fetching title…",
  "field.instrument_optional": "Instrument (optional)",
  "field.category_optional": "Category (optional)",
  "placeholder.category": "e.g. Practicing / Favorite / Genre",
  "field.duration_optional": "Duration (sec, optional)",
  "button.fetch": "Fetch",
  "button.fetching": "Fetching...",
  "error.fetch_duration": "Failed to fetch duration",

  // Video detail
  "error.video_not_found": "Video not found.",
  "video.open": "Open Video",
  "video.coverage": "Coverage",
  "video.proficiency": "Proficiency",
  "confirm.delete_video": "Delete this video?",
  "error.delete_failed": "Failed to delete",
  "video.timeline_title": "Practice Timeline",
  "error.no_track": "No track information.",
  "level.high": "High",
  "level.mid": "Mid",
  "level.low": "Low",
  "aria.toggle_top": "Toggle top row",
  "aria.toggle_mid": "Toggle middle row",
  "aria.toggle_bottom": "Toggle bottom row",
  "video.legend": "Top=High, Bottom=Low. Tap each row to toggle. Top can be ON only if lower is ON; turning OFF lower also turns OFF upper.",

  // Edit dialog
  "video.edit_title": "Edit Video Info",
  "field.title": "Title",
  "field.instrument": "Instrument",
  "field.category": "Category",
  "field.note": "Note",
  "field.duration": "Duration (sec)",
  "field.blocksize": "Block size (sec)",
  "hint.blocksize_change": "Existing progress is converted using the max value.",

  // Hub
  "hub.subtitle": "Practice modules hub",
  "hub.progress.title": "YouTube Copy Practice",
  "hub.progress.desc": "Video list, add, and per-video timeline",
  "hub.intervals.title": "Interval Practice",
  "hub.intervals.desc": "Realtime pitch detection with degree feedback",
  "hub.intervals_quiz.title": "Interval Quiz",
  "hub.intervals_quiz.desc": "Prompts like ‘Play a 3rd over C’ and scores your note",

  // Progress module
  "progress.title": "YouTube Copy Practice",
  "progress.new.subtitle": "Enter a YouTube URL to start practicing",

  // Nav
  "nav.home": "Home",
  "nav.progress": "Progress",

  // Intervals
  "intervals.title": "Bass Interval Master",
  "intervals.subtitle": "Fix the first detected note as the root and show the degree of the next notes in real time.",
  "intervals.start": "Start",
  "intervals.stop": "Stop",
  "intervals.reset_root": "Reset Root",
  "intervals.status.idle": "Idle",
  "intervals.status.detecting": "Detecting...",
  "intervals.status.detecting_low": "Detecting (Low Latency)",
  "intervals.status.detecting_stable": "Detecting (Stable)",
  "intervals.status.running_low": "Running (Low Latency)",
  "intervals.status.running_stable": "Running (Stable)",
  "intervals.status.mic_access": "Requesting microphone...",
  "intervals.status.mic_denied": "Microphone access denied",
  "intervals.status.stopped": "Stopped",
  "intervals.settings.detector": "Detector",
  "intervals.settings.input": "Input",
  "intervals.settings.advanced": "Advanced Settings",
  "intervals.detector.acf2plus": "ACF2PLUS (good for low tones)",
  "intervals.device": "Device",
  "intervals.root": "Root",
  "intervals.current": "Current",
  "intervals.current_note": "Current Note",
  "intervals.degree": "Degree",
  "intervals.tip.root_auto": "The first stable note detected will be set as the root automatically.",
  "intervals.example.degrees": "e.g., b3, 3, 4, b7, 5",
  "intervals.howto.title": "How to Use",
  "intervals.howto.1": "Press 'Start' and allow microphone access.",
  "intervals.howto.2": "The first note becomes the root (R). Then the degree of played notes is shown.",
  "intervals.howto.3": "If misdetected or to change root, press 'Reset Root'.",
  "intervals.howto.4": "In noisy environments detection may become unstable.",
  "intervals.howto.5": "On the fretboard, red=Root and blue=Current show same-pitch positions across strings (overlap = purple).",
  
  // Quiz (Intervals Quiz)
  "quiz.title": "Interval Quiz",
  "quiz.subtitle": "e.g., ‘Play a 3rd over C’. Uses microphone to judge.",
  "quiz.start": "Start",
  "quiz.stop": "Stop",
  "quiz.next": "Next Question",
  "quiz.input": "Input",
  "quiz.question_label": "Question",
  "quiz.question": "Play {degree} over {root}",
  "quiz.judge": "Judge:",
  "quiz.judge_idle": "-",
  "quiz.judge_listening": "Listening...",
  "quiz.correct": "Correct!",
  "quiz.wrong": "Wrong",
  "quiz.current_note": "Current",
  "quiz.current_note_none": "Current: -",
  "quiz.status.idle": "Idle",
  "quiz.status.listening": "Detecting...",
  "quiz.status.detected": "Detected",
  "quiz.status.running": "Scoring",
  "quiz.status.mic_access": "Requesting microphone...",
  "quiz.status.mic_denied": "Microphone access denied",
  "quiz.status.stopped": "Stopped",
  "quiz.howto.title": "How to Use",
  "quiz.howto.1": "Press 'Start' and allow microphone access.",
  "quiz.howto.2": "Play the requested degree in any octave (octave is free).",
  "quiz.howto.3": "It shows ‘Correct’ if matched; otherwise ‘Wrong’.",
  "quiz.howto.4": "Use ‘Next Question’ to get a new random prompt.",
};

const dict: Record<Locale, Dict> = { ja, en };

export function translate(locale: Locale, key: string): string {
  const d = dict[locale] || dict[defaultLocale];
  return d[key] ?? dict[defaultLocale][key] ?? key;
}
